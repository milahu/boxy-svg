import r from"/libs/pako/pako.js";var e=function(){var r={nextZero:function(r,e){for(;0!=r[e];)e++;return e},readUshort:function(r,e){return r[e]<<8|r[e+1]},writeUshort:function(r,e,t){r[e]=t>>8&255,r[e+1]=255&t},readUint:function(r,e){return 16777216*r[e]+(r[e+1]<<16|r[e+2]<<8|r[e+3])},writeUint:function(r,e,t){r[e]=t>>24&255,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=255&t},readASCII:function(r,e,t){for(var n="",a=0;a<t;a++)n+=String.fromCharCode(r[e+a]);return n},writeASCII:function(r,e,t){for(var n=0;n<t.length;n++)r[e+n]=t.charCodeAt(n)},readBytes:function(r,e,t){for(var n=[],a=0;a<t;a++)n.push(r[e+a]);return n},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(e,t,n){for(var a,f="",i=0;i<n;i++)f+="%"+r.pad(e[t+i].toString(16));try{a=decodeURIComponent(f)}catch(a){return r.readASCII(e,t,n)}return a}};function e(e,t,n,a){var i=t*n,o=f(a),l=Math.ceil(t*o/8),s=new Uint8Array(4*i),h=new Uint32Array(s.buffer),u=a.ctype,v=a.depth,c=r.readUshort;Date.now();if(6==u){var d=i<<2;if(8==v)for(var g=0;g<d;g+=4)s[g]=e[g],s[g+1]=e[g+1],s[g+2]=e[g+2],s[g+3]=e[g+3];if(16==v)for(g=0;g<d;g++)s[g]=e[g<<1]}else if(2==u){var b=a.tabs.tRNS;if(null==b){if(8==v)for(g=0;g<i;g++){var w=3*g;h[g]=255<<24|e[w+2]<<16|e[w+1]<<8|e[w]}if(16==v)for(g=0;g<i;g++){w=6*g;h[g]=255<<24|e[w+4]<<16|e[w+2]<<8|e[w]}}else{var p=b[0],y=b[1],m=b[2];if(8==v)for(g=0;g<i;g++){var U=g<<2;w=3*g;h[g]=255<<24|e[w+2]<<16|e[w+1]<<8|e[w],e[w]==p&&e[w+1]==y&&e[w+2]==m&&(s[U+3]=0)}if(16==v)for(g=0;g<i;g++){U=g<<2,w=6*g;h[g]=255<<24|e[w+4]<<16|e[w+2]<<8|e[w],c(e,w)==p&&c(e,w+2)==y&&c(e,w+4)==m&&(s[U+3]=0)}}}else if(3==u){var A=a.tabs.PLTE,M=a.tabs.tRNS,I=M?M.length:0;if(1==v)for(var C=0;C<n;C++){var x=C*l,T=C*t;for(g=0;g<t;g++){U=T+g<<2;var R=3*(S=e[x+(g>>3)]>>7-((7&g)<<0)&1);s[U]=A[R],s[U+1]=A[R+1],s[U+2]=A[R+2],s[U+3]=S<I?M[S]:255}}if(2==v)for(C=0;C<n;C++)for(x=C*l,T=C*t,g=0;g<t;g++){U=T+g<<2,R=3*(S=e[x+(g>>2)]>>6-((3&g)<<1)&3);s[U]=A[R],s[U+1]=A[R+1],s[U+2]=A[R+2],s[U+3]=S<I?M[S]:255}if(4==v)for(C=0;C<n;C++)for(x=C*l,T=C*t,g=0;g<t;g++){U=T+g<<2,R=3*(S=e[x+(g>>1)]>>4-((1&g)<<2)&15);s[U]=A[R],s[U+1]=A[R+1],s[U+2]=A[R+2],s[U+3]=S<I?M[S]:255}if(8==v)for(g=0;g<i;g++){var S;U=g<<2,R=3*(S=e[g]);s[U]=A[R],s[U+1]=A[R+1],s[U+2]=A[R+2],s[U+3]=S<I?M[S]:255}}else if(4==u){if(8==v)for(g=0;g<i;g++){U=g<<2;var N=e[L=g<<1];s[U]=N,s[U+1]=N,s[U+2]=N,s[U+3]=e[L+1]}if(16==v)for(g=0;g<i;g++){var L;U=g<<2,N=e[L=g<<2];s[U]=N,s[U+1]=N,s[U+2]=N,s[U+3]=e[L+2]}}else if(0==u)for(p=a.tabs.tRNS?a.tabs.tRNS:-1,C=0;C<n;C++){var q=C*l,B=C*t;if(1==v)for(var D=0;D<t;D++){var P=(N=255*(e[q+(D>>>3)]>>>7-(7&D)&1))==255*p?0:255;h[B+D]=P<<24|N<<16|N<<8|N}else if(2==v)for(D=0;D<t;D++){P=(N=85*(e[q+(D>>>2)]>>>6-((3&D)<<1)&3))==85*p?0:255;h[B+D]=P<<24|N<<16|N<<8|N}else if(4==v)for(D=0;D<t;D++){P=(N=17*(e[q+(D>>>1)]>>>4-((1&D)<<2)&15))==17*p?0:255;h[B+D]=P<<24|N<<16|N<<8|N}else if(8==v)for(D=0;D<t;D++){P=(N=e[q+D])==p?0:255;h[B+D]=P<<24|N<<16|N<<8|N}else if(16==v)for(D=0;D<t;D++){N=e[q+(D<<1)],P=c(e,q+(D<<1))==p?0:255;h[B+D]=P<<24|N<<16|N<<8|N}}return s}function t(r,e,t,o){Date.now();var l=f(r),s=Math.ceil(t*l/8),h=new Uint8Array((s+1+r.interlace)*o);e=r.tabs.CgBI?a(e,h):n(e,h);Date.now();return 0==r.interlace?e=i(e,r,0,t,o):1==r.interlace&&(e=function(r,e){var t=e.width,n=e.height,a=f(e),o=a>>3,l=Math.ceil(t*a/8),s=new Uint8Array(n*l),h=0,u=[0,0,4,0,2,0,1],v=[0,4,0,2,0,1,0],c=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],g=0;for(;g<7;){for(var b=c[g],w=d[g],p=0,y=0,m=u[g];m<n;)m+=b,y++;for(var U=v[g];U<t;)U+=w,p++;var A=Math.ceil(p*a/8);i(r,e,h,p,y);for(var M=0,I=u[g];I<n;){for(var C=v[g],x=h+M*A<<3;C<t;){var T;if(1==a)T=(T=r[x>>3])>>7-(7&x)&1,s[I*l+(C>>3)]|=T<<7-((7&C)<<0);if(2==a)T=(T=r[x>>3])>>6-(7&x)&3,s[I*l+(C>>2)]|=T<<6-((3&C)<<1);if(4==a)T=(T=r[x>>3])>>4-(7&x)&15,s[I*l+(C>>1)]|=T<<4-((1&C)<<2);if(a>=8)for(var R=I*l+C*o,S=0;S<o;S++)s[R+S]=r[(x>>3)+S];x+=a,C+=w}M++,I+=b}p*y!=0&&(h+=y*(1+A)),g+=1}return s}(e,r)),e}function n(r,e){return a(new Uint8Array(r.buffer,2,r.length-6),e)}var a=function(){var r,e,t=(r=Uint16Array,e=Uint32Array,{m:new r(16),v:new r(16),d:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],z:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],B:new r(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],w:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],h:new e(32),g:new r(512),s:[],A:new r(32),t:[],k:new r(32768),c:[],a:[],n:new r(32768),e:[],C:new r(512),b:[],i:new r(32768),r:new e(286),f:new e(30),l:new e(19),u:new e(15e3),q:new r(65536),j:new r(32768)});function n(r,e){for(var n,a,f,i,o=r.length,l=t.v,s=0;s<=e;s++)l[s]=0;for(s=1;s<o;s+=2)l[r[s]]++;var h=t.m;for(n=0,l[0]=0,a=1;a<=e;a++)n=n+l[a-1]<<1,h[a]=n;for(f=0;f<o;f+=2)0!=(i=r[f+1])&&(r[f]=h[i],h[i]++)}function a(r,e,n){for(var a=r.length,f=t.i,i=0;i<a;i+=2)if(0!=r[i+1])for(var o=i>>1,l=r[i+1],s=o<<4|l,h=e-l,u=r[i]<<h,v=u+(1<<h);u!=v;){n[f[u]>>>15-e]=s,u++}}function f(r,e){for(var n=t.i,a=15-e,f=0;f<r.length;f+=2){var i=r[f]<<e-r[f+1];r[f]=n[i]>>>a}}function i(r,e,t){return(r[e>>>3]|r[1+(e>>>3)]<<8)>>>(7&e)&(1<<t)-1}function o(r,e,t){return(r[e>>>3]|r[1+(e>>>3)]<<8|r[2+(e>>>3)]<<16)>>>(7&e)&(1<<t)-1}function l(r,e){return(r[e>>>3]|r[1+(e>>>3)]<<8|r[2+(e>>>3)]<<16)>>>(7&e)}function s(r,e){var t=r.length;if(e<=t)return r;var n=new Uint8Array(Math.max(t<<1,e));return n.set(r,0),n}function h(r,e,t,n,a,f){for(var o=0;o<t;){var s=r[l(n,a)&e];a+=15&s;var h=s>>>4;if(h<=15)f[o]=h,o++;else{var u=0,v=0;16==h?(v=3+i(n,a,2),a+=2,u=f[o-1]):17==h?(v=3+i(n,a,3),a+=3):18==h&&(v=11+i(n,a,7),a+=7);for(var c=o+v;o<c;)f[o]=u,o++}}return a}function u(r,e,t,n){for(var a=0,f=0,i=n.length>>>1;f<t;){var o=r[f+e];n[f<<1]=0,n[1+(f<<1)]=o,o>a&&(a=o),f++}for(;f<i;)n[f<<1]=0,n[1+(f<<1)]=0,f++;return a}return function(){for(var r=0;r<32768;r++){var e=r;e=(4278255360&(e=(4042322160&(e=(3435973836&(e=(2863311530&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8,t.i[r]=(e>>>16|e<<16)>>>17}function i(r,e,t){for(;0!=e--;)r.push(0,t)}for(r=0;r<32;r++)t.B[r]=t.o[r]<<3|t.z[r],t.h[r]=t.p[r]<<4|t.w[r];i(t.s,144,8),i(t.s,112,9),i(t.s,24,7),i(t.s,8,8),n(t.s,9),a(t.s,9,t.g),f(t.s,9),i(t.t,32,5),n(t.t,5),a(t.t,5,t.A),f(t.t,5),i(t.b,19,0),i(t.c,286,0),i(t.e,30,0),i(t.a,320,0)}(),function(r,e){var f,v,c=Uint8Array,d=0,g=0,b=0,w=0,p=0,y=0,m=0,U=0,A=0;if(3==r[0]&&0==r[1])return e||new c(0);var M=null==e;for(M&&(e=new c(r.length>>>2<<3));0==d;)if(d=o(r,A,1),g=o(r,A+1,2),A+=3,0!=g){if(M&&(e=s(e,U+(1<<17))),1==g&&(f=t.g,v=t.A,y=511,m=31),2==g){b=i(r,A,5)+257,w=i(r,A+5,5)+1,p=i(r,A+10,4)+4;A+=14;for(var I=1,C=0;C<38;C+=2)t.b[C]=0,t.b[C+1]=0;for(C=0;C<p;C++){var x=i(r,A+3*C,3);t.b[1+(t.d[C]<<1)]=x,x>I&&(I=x)}A+=3*p,n(t.b,I),a(t.b,I,t.C),f=t.k,v=t.n,A=h(t.C,(1<<I)-1,b+w,r,A,t.a);var T=u(t.a,0,b,t.c);y=(1<<T)-1;var R=u(t.a,b,w,t.e);m=(1<<R)-1,n(t.c,T),a(t.c,T,f),n(t.e,R),a(t.e,R,v)}for(;;){var S=f[l(r,A)&y];A+=15&S;var N=S>>>4;if(N>>>8==0)e[U++]=N;else{if(256==N)break;var L=U+N-254;if(N>264){var q=t.B[N-257];L=U+(q>>>3)+i(r,A,7&q),A+=7&q}var B=v[l(r,A)&m];A+=15&B;var D=B>>>4,P=t.h[D],k=(P>>>4)+o(r,A,15&P);for(A+=15&P,M&&(e=s(e,U+(1<<17)));U<L;)e[U]=e[U++-k],e[U]=e[U++-k],e[U]=e[U++-k],e[U]=e[U++-k];U=L}}}else{0!=(7&A)&&(A+=8-(7&A));var H=4+(A>>>3),E=r[H-4]|r[H-3]<<8;M&&(e=s(e,U+E)),e.set(new c(r.buffer,r.byteOffset+H,E),U),A=H+E<<3,U+=E}return e.length==U?e:e.slice(0,U)}}();function f(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function i(r,e,t,n,a){var i=f(e),l=Math.ceil(n*i/8);i=Math.ceil(i/8);var s,h,u=r[t],v=0;if(u>1&&(r[t]=[0,0,1][u-2]),3==u)for(v=i;v<l;v++)r[v+1]=r[v+1]+(r[v+1-i]>>>1)&255;for(var c=0;c<a;c++)if(v=0,0==(u=r[(h=(s=t+c*l)+c+1)-1]))for(;v<l;v++)r[s+v]=r[h+v];else if(1==u){for(;v<i;v++)r[s+v]=r[h+v];for(;v<l;v++)r[s+v]=r[h+v]+r[s+v-i]}else if(2==u)for(;v<l;v++)r[s+v]=r[h+v]+r[s+v-l];else if(3==u){for(;v<i;v++)r[s+v]=r[h+v]+(r[s+v-l]>>>1);for(;v<l;v++)r[s+v]=r[h+v]+(r[s+v-l]+r[s+v-i]>>>1)}else{for(;v<i;v++)r[s+v]=r[h+v]+o(0,r[s+v-l],0);for(;v<l;v++)r[s+v]=r[h+v]+o(r[s+v-i],r[s+v-l],r[s+v-i-l])}return r}function o(r,e,t){var n=r+e-t,a=n-r,f=n-e,i=n-t;return a*a<=f*f&&a*a<=i*i?r:f*f<=i*i?e:t}function l(e,t,n){n.width=r.readUint(e,t),t+=4,n.height=r.readUint(e,t),t+=4,n.depth=e[t],t++,n.ctype=e[t],t++,n.compress=e[t],t++,n.filter=e[t],t++,n.interlace=e[t],t++}function s(r,e,t,n,a,f,i,o,l){for(var s=Math.min(e,a),h=Math.min(t,f),u=0,v=0,c=0;c<h;c++)for(var d=0;d<s;d++)if(i>=0&&o>=0?(u=c*e+d<<2,v=(o+c)*a+i+d<<2):(u=(-o+c)*e-i+d<<2,v=c*a+d<<2),0==l)n[v]=r[u],n[v+1]=r[u+1],n[v+2]=r[u+2],n[v+3]=r[u+3];else if(1==l){var g=r[u+3]*(1/255),b=r[u]*g,w=r[u+1]*g,p=r[u+2]*g,y=n[v+3]*(1/255),m=n[v]*y,U=n[v+1]*y,A=n[v+2]*y,M=1-g,I=g+y*M,C=0==I?0:1/I;n[v+3]=255*I,n[v+0]=(b+m*M)*C,n[v+1]=(w+U*M)*C,n[v+2]=(p+A*M)*C}else if(2==l){g=r[u+3],b=r[u],w=r[u+1],p=r[u+2],y=n[v+3],m=n[v],U=n[v+1],A=n[v+2];g==y&&b==m&&w==U&&p==A?(n[v]=0,n[v+1]=0,n[v+2]=0,n[v+3]=0):(n[v]=b,n[v+1]=w,n[v+2]=p,n[v+3]=g)}else if(3==l){g=r[u+3],b=r[u],w=r[u+1],p=r[u+2],y=n[v+3],m=n[v],U=n[v+1],A=n[v+2];if(g==y&&b==m&&w==U&&p==A)continue;if(g<220&&y>20)return!1}return!0}return{decode:function(e){for(var f,i=new Uint8Array(e),o=8,s=r,h=s.readUshort,u=s.readUint,v={tabs:{},frames:[]},c=new Uint8Array(i.length),d=0,g=0,b=[137,80,78,71,13,10,26,10],w=0;w<8;w++)if(i[w]!=b[w])throw"The input is not a PNG file!";for(;o<i.length;){var p=s.readUint(i,o);o+=4;var y=s.readASCII(i,o,4);if(o+=4,"IHDR"==y)l(i,o,v);else if("iCCP"==y){for(var m=o;0!=i[m];)m++;s.readASCII(i,o,m-o),i[m+1];var U=i.slice(m+2,o+p),A=null;try{A=n(U)}catch(r){A=a(U)}v.tabs[y]=A}else if("CgBI"==y)v.tabs[y]=i.slice(o,o+4);else if("IDAT"==y){for(w=0;w<p;w++)c[d+w]=i[o+w];d+=p}else if("acTL"==y)v.tabs[y]={num_frames:u(i,o),num_plays:u(i,o+4)},f=new Uint8Array(i.length);else if("fcTL"==y){var M;if(0!=g)(M=v.frames[v.frames.length-1]).data=t(v,f.slice(0,g),M.rect.width,M.rect.height),g=0;var I={x:u(i,o+12),y:u(i,o+16),width:u(i,o+4),height:u(i,o+8)},C=h(i,o+22);C=h(i,o+20)/(0==C?100:C);var x={rect:I,delay:Math.round(1e3*C),dispose:i[o+24],blend:i[o+25]};v.frames.push(x)}else if("fdAT"==y){for(w=0;w<p-4;w++)f[g+w]=i[o+w+4];g+=p-4}else if("pHYs"==y)v.tabs[y]=[s.readUint(i,o),s.readUint(i,o+4),i[o+8]];else if("cHRM"==y){v.tabs[y]=[];for(w=0;w<8;w++)v.tabs[y].push(s.readUint(i,o+4*w))}else if("tEXt"==y||"zTXt"==y){null==v.tabs[y]&&(v.tabs[y]={});var T=s.nextZero(i,o),R=s.readASCII(i,o,T-o),S=o+p-T-1;if("tEXt"==y)q=s.readASCII(i,T+1,S);else{var N=n(i.slice(T+2,T+2+S));q=s.readUTF8(N,0,N.length)}v.tabs[y][R]=q}else if("iTXt"==y){null==v.tabs[y]&&(v.tabs[y]={});T=0,m=o;T=s.nextZero(i,m);R=s.readASCII(i,m,T-m);var L=i[m=T+1];i[m+1];m+=2,T=s.nextZero(i,m);s.readASCII(i,m,T-m);m=T+1,T=s.nextZero(i,m);var q;s.readUTF8(i,m,T-m),S=p-((m=T+1)-o);if(0==L)q=s.readUTF8(i,m,S);else{N=n(i.slice(m,m+S));q=s.readUTF8(N,0,N.length)}v.tabs[y][R]=q}else if("PLTE"==y)v.tabs[y]=s.readBytes(i,o,p);else if("hIST"==y){var B=v.tabs.PLTE.length/3;v.tabs[y]=[];for(w=0;w<B;w++)v.tabs[y].push(h(i,o+2*w))}else if("tRNS"==y)3==v.ctype?v.tabs[y]=s.readBytes(i,o,p):0==v.ctype?v.tabs[y]=h(i,o):2==v.ctype&&(v.tabs[y]=[h(i,o),h(i,o+2),h(i,o+4)]);else if("gAMA"==y)v.tabs[y]=s.readUint(i,o)/1e5;else if("sRGB"==y)v.tabs[y]=i[o];else if("bKGD"==y)0==v.ctype||4==v.ctype?v.tabs[y]=[h(i,o)]:2==v.ctype||6==v.ctype?v.tabs[y]=[h(i,o),h(i,o+2),h(i,o+4)]:3==v.ctype&&(v.tabs[y]=i[o]);else if("IEND"==y)break;o+=p;s.readUint(i,o);o+=4}return 0!=g&&((M=v.frames[v.frames.length-1]).data=t(v,f.slice(0,g),M.rect.width,M.rect.height)),v.data=t(v,c,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(r){var t=r.width,n=r.height;if(null==r.tabs.acTL)return[e(r.data,t,n,r).buffer];var a=[];null==r.frames[0].data&&(r.frames[0].data=r.data);for(var f=t*n*4,i=new Uint8Array(f),o=new Uint8Array(f),l=new Uint8Array(f),h=0;h<r.frames.length;h++){var u=r.frames[h],v=u.rect.x,c=u.rect.y,d=u.rect.width,g=u.rect.height,b=e(u.data,d,g,r);if(0!=h)for(var w=0;w<f;w++)l[w]=i[w];if(0==u.blend?s(b,d,g,i,t,n,v,c,0):1==u.blend&&s(b,d,g,i,t,n,v,c,1),a.push(i.buffer.slice(0)),0==u.dispose);else if(1==u.dispose)s(o,d,g,i,t,n,v,c,0);else if(2==u.dispose)for(w=0;w<f;w++)i[w]=l[w]}return a},_paeth:o,_copyTile:s,_bin:r}}();!function(){var t=e._copyTile,n=e._bin,a=e._paeth,f={table:function(){for(var r=new Uint32Array(256),e=0;e<256;e++){for(var t=e,n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;r[e]=t}return r}(),update:function(r,e,t,n){for(var a=0;a<n;a++)r=f.table[255&(r^e[t+a])]^r>>>8;return r},crc:function(r,e,t){return 4294967295^f.update(4294967295,r,e,t)}};function i(r,e,t,n){e[t]+=r[0]*n>>4,e[t+1]+=r[1]*n>>4,e[t+2]+=r[2]*n>>4,e[t+3]+=r[3]*n>>4}function o(r){return Math.max(0,Math.min(255,r))}function l(r,e){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],f=r[3]-e[3];return t*t+n*n+a*a+f*f}function s(r,e,t,n,a,f,s){null==s&&(s=1);for(var h=n.length,u=[],v=[],c=0;c<h;c++){var d=n[c];u.push([d>>>0&255,d>>>8&255,d>>>16&255,d>>>24&255])}for(c=0;c<h;c++){for(var g=4294967295,b=0,w=0;w<h;w++){var p=l(u[c],u[w]);w!=c&&p<g&&(g=p,b=w)}var y=Math.sqrt(g)/2;v[c]=~~(y*y)}var m=new Uint32Array(a.buffer),U=new Int16Array(e*t*4),A=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(c=0;c<A.length;c++)A[c]=255*((A[c]+.5)/16-.5);for(var M=0;M<t;M++)for(var I=0;I<e;I++){var C;c=4*(M*e+I);if(2!=s)C=[o(r[c]+U[c]),o(r[c+1]+U[c+1]),o(r[c+2]+U[c+2]),o(r[c+3]+U[c+3])];else{p=A[4*(3&M)+(3&I)];C=[o(r[c]+p),o(r[c+1]+p),o(r[c+2]+p),o(r[c+3]+p)]}b=0;var x=16777215;for(w=0;w<h;w++){var T=l(C,u[w]);T<x&&(x=T,b=w)}var R=u[b],S=[C[0]-R[0],C[1]-R[1],C[2]-R[2],C[3]-R[3]];1==s&&(I!=e-1&&i(S,U,c+4,7),M!=t-1&&(0!=I&&i(S,U,c+4*e-4,3),i(S,U,c+4*e,5),I!=e-1&&i(S,U,c+4*e+4,1))),f[c>>2]=b,m[c>>2]=n[b]}}function h(e,t,a,i,o){null==o&&(o={});var l,s=f.crc,h=n.writeUint,u=n.writeUshort,v=n.writeASCII,c=8,d=e.frames.length>1,g=!1,b=33+(d?20:0);if(null!=o.sRGB&&(b+=13),null!=o.pHYs&&(b+=21),null!=o.iCCP&&(b+=21+(l=r.deflate(o.iCCP)).length+4),3==e.ctype){for(var w=e.plte.length,p=0;p<w;p++)e.plte[p]>>>24!=255&&(g=!0);b+=8+3*w+4+(g?8+1*w+4:0)}for(var y=0;y<e.frames.length;y++){d&&(b+=38),b+=(S=e.frames[y]).cimg.length+12,0!=y&&(b+=4)}b+=12;var m=new Uint8Array(b),U=[137,80,78,71,13,10,26,10];for(p=0;p<8;p++)m[p]=U[p];if(h(m,c,13),v(m,c+=4,"IHDR"),h(m,c+=4,t),h(m,c+=4,a),m[c+=4]=e.depth,m[++c]=e.ctype,m[++c]=0,m[++c]=0,m[++c]=0,h(m,++c,s(m,c-17,17)),c+=4,null!=o.sRGB&&(h(m,c,1),v(m,c+=4,"sRGB"),m[c+=4]=o.sRGB,h(m,++c,s(m,c-5,5)),c+=4),null!=o.iCCP){var A=13+l.length;h(m,c,A),v(m,c+=4,"iCCP"),v(m,c+=4,"ICC profile"),c+=11,c+=2,m.set(l,c),h(m,c+=l.length,s(m,c-(A+4),A+4)),c+=4}if(null!=o.pHYs&&(h(m,c,9),v(m,c+=4,"pHYs"),h(m,c+=4,o.pHYs[0]),h(m,c+=4,o.pHYs[1]),m[c+=4]=o.pHYs[2],h(m,++c,s(m,c-13,13)),c+=4),d&&(h(m,c,8),v(m,c+=4,"acTL"),h(m,c+=4,e.frames.length),h(m,c+=4,null!=o.loop?o.loop:0),h(m,c+=4,s(m,c-12,12)),c+=4),3==e.ctype){h(m,c,3*(w=e.plte.length)),v(m,c+=4,"PLTE"),c+=4;for(p=0;p<w;p++){var M=3*p,I=e.plte[p],C=255&I,x=I>>>8&255,T=I>>>16&255;m[c+M+0]=C,m[c+M+1]=x,m[c+M+2]=T}if(h(m,c+=3*w,s(m,c-3*w-4,3*w+4)),c+=4,g){h(m,c,w),v(m,c+=4,"tRNS"),c+=4;for(p=0;p<w;p++)m[c+p]=e.plte[p]>>>24&255;h(m,c+=w,s(m,c-w-4,w+4)),c+=4}}var R=0;for(y=0;y<e.frames.length;y++){var S=e.frames[y];d&&(h(m,c,26),v(m,c+=4,"fcTL"),h(m,c+=4,R++),h(m,c+=4,S.rect.width),h(m,c+=4,S.rect.height),h(m,c+=4,S.rect.x),h(m,c+=4,S.rect.y),u(m,c+=4,i[y]),u(m,c+=2,1e3),m[c+=2]=S.dispose,m[++c]=S.blend,h(m,++c,s(m,c-30,30)),c+=4);var N=S.cimg;h(m,c,(w=N.length)+(0==y?0:4));var L=c+=4;v(m,c,0==y?"IDAT":"fdAT"),c+=4,0!=y&&(h(m,c,R++),c+=4),m.set(N,c),h(m,c+=w,s(m,L,c-L)),c+=4}return h(m,c,0),v(m,c+=4,"IEND"),h(m,c+=4,s(m,c-4,4)),c+=4,m.buffer}function u(r,e,t){for(var n=0;n<r.frames.length;n++){var a=r.frames[n],f=(a.rect.width,a.rect.height),i=new Uint8Array(f*a.bpl+f);a.cimg=g(a.img,f,a.bpp,a.bpl,i,e,t)}}function v(r,e,n,a,f){for(var i=f[0],o=f[1],l=f[2],h=f[3],u=f[4],v=f[5],g=6,b=8,p=255,y=0;y<r.length;y++)for(var m=new Uint8Array(r[y]),U=m.length,A=0;A<U;A+=4)p&=m[A+3];var M=255!=p,I=function(r,e,n,a,f,i){for(var o=[],l=0;l<r.length;l++){var s,h=new Uint8Array(r[l]),u=new Uint32Array(h.buffer),v=0,g=0,b=e,w=n,p=a?1:0;if(0!=l){for(var y=i||a||1==l||0!=o[l-2].dispose?1:2,m=0,U=1e9,A=0;A<y;A++){for(var M=new Uint8Array(r[l-1-A]),I=new Uint32Array(r[l-1-A]),C=e,x=n,T=-1,R=-1,S=0;S<n;S++)for(var N=0;N<e;N++){u[H=S*e+N]!=I[H]&&(N<C&&(C=N),N>T&&(T=N),S<x&&(x=S),S>R&&(R=S))}-1==T&&(C=x=T=R=0),f&&(1==(1&C)&&C--,1==(1&x)&&x--);var L=(T-C+1)*(R-x+1);L<U&&(U=L,m=A,v=C,g=x,b=T-C+1,w=R-x+1)}M=new Uint8Array(r[l-1-m]);1==m&&(o[l-1].dispose=2),s=new Uint8Array(b*w*4),t(M,e,n,s,b,w,-v,-g,0),1==(p=t(h,e,n,s,b,w,-v,-g,3)?1:0)?d(h,e,n,s,{x:v,y:g,width:b,height:w}):t(h,e,n,s,b,w,-v,-g,0)}else s=h.slice(0);o.push({rect:{x:v,y:g,width:b,height:w},img:s,blend:p,dispose:0})}if(a)for(l=0;l<o.length;l++){if(1!=(E=o[l]).blend){var q=E.rect,B=o[l-1].rect,D=Math.min(q.x,B.x),P=Math.min(q.y,B.y),k={x:D,y:P,width:Math.max(q.x+q.width,B.x+B.width)-D,height:Math.max(q.y+q.height,B.y+B.height)-P};o[l-1].dispose=1,l-1!=0&&c(r,e,n,o,l-1,k,f),c(r,e,n,o,l,k,f)}}if(1!=r.length)for(var H=0;H<o.length;H++){var E;(E=o[H]).rect.width*E.rect.height}return o}(r,e,n,i,o,l),C={},x=[],T=[];if(0!=a){var R=[];for(A=0;A<I.length;A++)R.push(I[A].img.buffer);var S=function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t].byteLength;var n=new Uint8Array(e),a=0;for(t=0;t<r.length;t++){for(var f=new Uint8Array(r[t]),i=f.length,o=0;o<i;o+=4){var l=f[o],s=f[o+1],h=f[o+2],u=f[o+3];0==u&&(l=s=h=0),n[a+o]=l,n[a+o+1]=s,n[a+o+2]=h,n[a+o+3]=u}a+=i}return n.buffer}(R),N=w(S,a);for(A=0;A<N.plte.length;A++)x.push(N.plte[A].est.rgba);var L=0;for(A=0;A<I.length;A++){var q=(P=I[A]).img.length,B=new Uint8Array(N.inds.buffer,L>>2,q>>2);T.push(B);var D=new Uint8Array(N.abuf,L,q);v&&s(P.img,P.rect.width,P.rect.height,x,D,B),P.img.set(D),L+=q}}else for(y=0;y<I.length;y++){var P=I[y],k=new Uint32Array(P.img.buffer),H=P.rect.width;U=k.length,B=new Uint8Array(U);T.push(B);for(A=0;A<U;A++){var E=k[A];if(0!=A&&E==k[A-1])B[A]=B[A-1];else if(A>H&&E==k[A-H])B[A]=B[A-H];else{var G=C[E];if(null==G&&(C[E]=G=x.length,x.push(E),x.length>=300))break;B[A]=G}}}var _=x.length;_<=256&&0==u&&(b=_<=2?1:_<=4?2:_<=16?4:8,b=Math.max(b,h));for(y=0;y<I.length;y++){(P=I[y]).rect.x,P.rect.y,H=P.rect.width;var z=P.rect.height,Y=P.img,Z=(new Uint32Array(Y.buffer),4*H),F=4;if(_<=256&&0==u){Z=Math.ceil(b*H/8);for(var X=new Uint8Array(Z*z),j=T[y],K=0;K<z;K++){A=K*Z;var V=K*H;if(8==b)for(var O=0;O<H;O++)X[A+O]=j[V+O];else if(4==b)for(O=0;O<H;O++)X[A+(O>>1)]|=j[V+O]<<4-4*(1&O);else if(2==b)for(O=0;O<H;O++)X[A+(O>>2)]|=j[V+O]<<6-2*(3&O);else if(1==b)for(O=0;O<H;O++)X[A+(O>>3)]|=j[V+O]<<7-1*(7&O)}Y=X,g=3,F=1}else if(0==M&&1==I.length){X=new Uint8Array(H*z*3);var J=H*z;for(A=0;A<J;A++){var Q=3*A,W=4*A;X[Q]=Y[W],X[Q+1]=Y[W+1],X[Q+2]=Y[W+2]}Y=X,g=2,F=3,Z=3*H}P.img=Y,P.bpl=Z,P.bpp=F}return{ctype:g,depth:b,plte:x,frames:I}}function c(r,e,n,a,f,i,o){for(var l=Uint8Array,s=Uint32Array,h=new l(r[f-1]),u=new s(r[f-1]),v=f+1<r.length?new l(r[f+1]):null,c=new l(r[f]),g=new s(c.buffer),b=e,w=n,p=-1,y=-1,m=0;m<i.height;m++)for(var U=0;U<i.width;U++){var A=i.x+U,M=i.y+m,I=M*e+A,C=g[I];0==C||0==a[f-1].dispose&&u[I]==C&&(null==v||0!=v[4*I+3])||(A<b&&(b=A),A>p&&(p=A),M<w&&(w=M),M>y&&(y=M))}-1==p&&(b=w=p=y=0),o&&(1==(1&b)&&b--,1==(1&w)&&w--),i={x:b,y:w,width:p-b+1,height:y-w+1};var x=a[f];x.rect=i,x.blend=1,x.img=new Uint8Array(i.width*i.height*4),0==a[f-1].dispose?(t(h,e,n,x.img,i.width,i.height,-i.x,-i.y,0),d(c,e,n,x.img,i)):t(c,e,n,x.img,i.width,i.height,-i.x,-i.y,0)}function d(r,e,n,a,f){t(r,e,n,a,f.width,f.height,-f.x,-f.y,2)}function g(e,t,n,a,f,i,o){var l,s=[],h=[0,1,2,3,4];-1!=i?h=[i]:(t*a>5e5||1==n)&&(h=[0]),o&&(l={level:0});for(var u=f.length>1e7&&null!=window.UZIP?window.UZIP:r,v=(Date.now(),0);v<h.length;v++){for(var c=0;c<t;c++)b(f,e,c,a,n,h[v]);s.push(u.deflate(f,l))}var d,g=1e9;for(v=0;v<s.length;v++)s[v].length<g&&(d=v,g=s[v].length);return s[d]}function b(r,e,t,n,f,i){var o=t*n,l=o+t;if(r[l]=i,l++,0==i)if(n<500)for(var s=0;s<n;s++)r[l+s]=e[o+s];else r.set(new Uint8Array(e.buffer,o,n),l);else if(1==i){for(s=0;s<f;s++)r[l+s]=e[o+s];for(s=f;s<n;s++)r[l+s]=e[o+s]-e[o+s-f]+256&255}else if(0==t){for(s=0;s<f;s++)r[l+s]=e[o+s];if(2==i)for(s=f;s<n;s++)r[l+s]=e[o+s];if(3==i)for(s=f;s<n;s++)r[l+s]=e[o+s]-(e[o+s-f]>>1)+256&255;if(4==i)for(s=f;s<n;s++)r[l+s]=e[o+s]-a(e[o+s-f],0,0)+256&255}else{if(2==i)for(s=0;s<n;s++)r[l+s]=e[o+s]+256-e[o+s-n]&255;if(3==i){for(s=0;s<f;s++)r[l+s]=e[o+s]+256-(e[o+s-n]>>1)&255;for(s=f;s<n;s++)r[l+s]=e[o+s]+256-(e[o+s-n]+e[o+s-f]>>1)&255}if(4==i){for(s=0;s<f;s++)r[l+s]=e[o+s]+256-a(0,e[o+s-n],0)&255;for(s=f;s<n;s++)r[l+s]=e[o+s]+256-a(e[o+s-f],e[o+s-n],e[o+s-f-n])&255}}}function w(r,e,t){Date.now();for(var n=new Uint8Array(r),a=n.slice(0),f=new Uint32Array(a.buffer),i=U(a,e),o=i[0],l=i[1],s=l.length,h=new Uint32Array(s),u=new Uint8Array(h.buffer),v=0;v<s;v++)h[v]=l[v].est.rgba;var c,d=n.length,g=new Uint8Array(d>>2);if(s<=60)m(n,g,u),p(g,f,h);else if(n.length<32e6)for(v=0;v<d;v+=4){c=A(o,b=n[v]*(1/255),w=n[v+1]*(1/255),I=n[v+2]*(1/255),C=n[v+3]*(1/255)),g[v>>2]=c.ind,f[v>>2]=c.est.rgba}else for(v=0;v<d;v+=4){var b=n[v]*(1/255),w=n[v+1]*(1/255),I=n[v+2]*(1/255),C=n[v+3]*(1/255);for(c=o;c.left;)c=M(c.est,b,w,I,C)<=0?c.left:c.right;g[v>>2]=c.ind,f[v>>2]=c.est.rgba}if(t||n.length*s<4e7){var x=1e9;for(v=0;v<10;v++){var T=y(n,g,u);if(T/x>.997)break;x=T}for(v=0;v<s;v++)l[v].est.rgba=h[v];p(g,f,h)}return{abuf:a.buffer,inds:g,plte:l}}function p(r,e,t){for(var n=0;n<r.length;n++)e[n]=t[r[n]]}function y(r,e,t){return function(r,e,t){for(var n=t.length>>>2,a=new Uint32Array(4*n),f=new Uint32Array(n),i=0;i<r.length;i+=4){var o=e[i>>>2],l=4*o;f[o]++,a[l]+=r[i],a[l+1]+=r[i+1],a[l+2]+=r[i+2],a[l+3]+=r[i+3]}for(i=0;i<t.length;i++)t[i]=Math.round(a[i]/f[i>>>2])}(r,e,t),m(r,e,t)}function m(r,e,t){for(var n=0,a=t.length>>>2,f=[],i=0;i<a;i++){for(var o=t[g=4*i],l=t[g+1],s=t[g+2],h=t[g+3],u=0,v=1e9,c=0;c<a;c++)if(i!=c){var d=4*c;(m=(b=o-t[d])*b+(w=l-t[d+1])*w+(p=s-t[d+2])*p+(y=h-t[d+3])*y)<v&&(v=m,u=c)}f[i]=.5*Math.sqrt(v),f[i]=f[i]*f[i]}for(i=0;i<r.length;i+=4){var g,b,w,p,y;o=r[i],l=r[i+1],s=r[i+2],h=r[i+3];if((v=(b=o-t[g=4*(u=e[i>>>2])])*b+(w=l-t[g+1])*w+(p=s-t[g+2])*p+(y=h-t[g+3])*y)>f[u])for(c=0;c<a;c++){var m;if((m=(b=o-t[g=4*c])*b+(w=l-t[g+1])*w+(p=s-t[g+2])*p+(y=h-t[g+3])*y)<v&&(u=c,(v=m)<f[c]))break}e[i>>>2]=u,n+=v}return n/(r.length>>>2)}function U(r,e,t){null==t&&(t=1e-4);var n=new Uint32Array(r.buffer),a={i0:0,i1:r.length,bst:null,est:null,tdst:0,left:null,right:null};a.bst=x(r,a.i0,a.i1),a.est=T(a.bst);for(var f=[a];f.length<e;){for(var i=0,o=0,l=0;l<f.length;l++)f[l].est.L>i&&(i=f[l].est.L,o=l);if(i<t)break;var s=f[o],h=I(r,n,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=h||s.i1<=h)s.est.L=0;else{var u={i0:s.i0,i1:h,bst:null,est:null,tdst:0,left:null,right:null};u.bst=x(r,u.i0,u.i1),u.est=T(u.bst);var v={i0:h,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};v.bst={R:[],m:[],N:s.bst.N-u.bst.N};for(l=0;l<16;l++)v.bst.R[l]=s.bst.R[l]-u.bst.R[l];for(l=0;l<4;l++)v.bst.m[l]=s.bst.m[l]-u.bst.m[l];v.est=T(v.bst),s.left=u,s.right=v,f[o]=u,f.push(v)}}f.sort((function(r,e){return e.bst.N-r.bst.N}));for(l=0;l<f.length;l++)f[l].ind=l;return[a,f]}function A(r,e,t,n,a){if(null==r.left)return r.tdst=function(r,e,t,n,a){var f=e-r[0],i=t-r[1],o=n-r[2],l=a-r[3];return f*f+i*i+o*o+l*l}(r.est.q,e,t,n,a),r;var f=M(r.est,e,t,n,a),i=r.left,o=r.right;f>0&&(i=r.right,o=r.left);var l=A(i,e,t,n,a);if(l.tdst<=f*f)return l;var s=A(o,e,t,n,a);return s.tdst<l.tdst?s:l}function M(r,e,t,n,a){var f=r.e;return f[0]*e+f[1]*t+f[2]*n+f[3]*a-r.eMq}function I(r,e,t,n,a,f){n-=4;for(;t<n;){for(;C(r,t,a)<=f;)t+=4;for(;C(r,n,a)>f;)n-=4;if(t>=n)break;var i=e[t>>2];e[t>>2]=e[n>>2],e[n>>2]=i,t+=4,n-=4}for(;C(r,t,a)>f;)t-=4;return t+4}function C(r,e,t){return r[e]*t[0]+r[e+1]*t[1]+r[e+2]*t[2]+r[e+3]*t[3]}function x(r,e,t){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0],f=t-e>>2,i=e;i<t;i+=4){var o=r[i]*(1/255),l=r[i+1]*(1/255),s=r[i+2]*(1/255),h=r[i+3]*(1/255);a[0]+=o,a[1]+=l,a[2]+=s,a[3]+=h,n[0]+=o*o,n[1]+=o*l,n[2]+=o*s,n[3]+=o*h,n[5]+=l*l,n[6]+=l*s,n[7]+=l*h,n[10]+=s*s,n[11]+=s*h,n[15]+=h*h}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:a,N:f}}function T(r){var e=r.R,t=r.m,n=r.N,a=t[0],f=t[1],i=t[2],o=t[3],l=0==n?0:1/n,s=[e[0]-a*a*l,e[1]-a*f*l,e[2]-a*i*l,e[3]-a*o*l,e[4]-f*a*l,e[5]-f*f*l,e[6]-f*i*l,e[7]-f*o*l,e[8]-i*a*l,e[9]-i*f*l,e[10]-i*i*l,e[11]-i*o*l,e[12]-o*a*l,e[13]-o*f*l,e[14]-o*i*l,e[15]-o*o*l],h=s,u=R,v=[Math.random(),Math.random(),Math.random(),Math.random()],c=0,d=0;if(0!=n)for(var g=0;g<16&&(v=u.multVec(h,v),d=Math.sqrt(u.dot(v,v)),v=u.sml(1/d,v),!(0!=g&&Math.abs(d-c)<1e-9));g++)c=d;var b=[a*l,f*l,i*l,o*l];return{Cov:s,q:b,e:v,L:c,eMq255:u.dot(u.sml(255,b),v),eMq:u.dot(v,b),rgba:(Math.round(255*b[3])<<24|Math.round(255*b[2])<<16|Math.round(255*b[1])<<8|Math.round(255*b[0])<<0)>>>0}}var R={multVec:function(r,e){return[r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3],r[4]*e[0]+r[5]*e[1]+r[6]*e[2]+r[7]*e[3],r[8]*e[0]+r[9]*e[1]+r[10]*e[2]+r[11]*e[3],r[12]*e[0]+r[13]*e[1]+r[14]*e[2]+r[15]*e[3]]},dot:function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]},sml:function(r,e){return[r*e[0],r*e[1],r*e[2],r*e[3]]}};e.encode=function(r,e,t,n,a,f,i){null==n&&(n=0),null==i&&(i=!1);var o=v(r,e,t,n,[!1,!1,!1,0,i,!1]);return u(o,-1),h(o,e,t,a,f)},e.encodeLL=function(r,e,t,n,a,f,i,o){for(var l={ctype:0+(1==n?0:2)+(0==a?0:4),depth:f,frames:[]},s=(Date.now(),(n+a)*f),v=s*e,c=0;c<r.length;c++)l.frames.push({rect:{x:0,y:0,width:e,height:t},img:new Uint8Array(r[c]),blend:0,dispose:1,bpp:Math.ceil(s/8),bpl:Math.ceil(v/8)});return u(l,0,!0),h(l,e,t,i,o)},e.encode.compress=v,e.encode.dither=s,e.quantize=w,e.quantize.findNearest=m,e.quantize.getKDtree=U,e.quantize.getNearest=A}();export default e;